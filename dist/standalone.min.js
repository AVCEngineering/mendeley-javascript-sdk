!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.MendeleySDK=t():e.MendeleySDK=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports={API:r(1),Auth:r(2),Request:r(3),Notifier:r(4)}},function(e,t,r){var n;n=function(e){"use strict";var t=r(5);return{setAuthFlow:t.setAuthFlow,setBaseUrl:t.setBaseUrl,setNotifier:t.setNotifier,annotations:r(6)(),catalog:r(7)(),documents:r(8)(),files:r(9)(),folders:r(10)(),followers:r(11)(),groups:r(12)(),institutions:r(13)(),locations:r(14)(),metadata:r(15)(),profiles:r(16)(),trash:r(17)()}}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,r){var n;n=function(){"use strict";function e(e){if(f=$.extend({},c,l,e||{}),!f.clientId)return console.error("You must provide a clientId for implicit grant flow"),!1;if(!f.redirectUrl){var t=f.win.location;f.redirectUrl=t.protocol+"//"+t.host+t.pathname}return f.apiAuthenticateUrl=f.apiAuthenticateUrl+"?client_id="+f.clientId+"&redirect_uri="+f.redirectUrl+"&scope="+f.scope+"&response_type=token",f.authenticateOnStart&&!i()&&n(),{authenticate:n,getToken:i,refreshToken:r()}}function t(e){return f=$.extend({},c,d,e||{}),f.apiAuthenticateUrl?(f.authenticateOnStart&&!s()&&n(),{authenticate:n,getToken:s,refreshToken:a}):(console.error("You must provide an apiAuthenticateUrl for auth code flow"),!1)}function r(){return function(){return!1}}function n(){var e="function"==typeof f.apiAuthenticateUrl?f.apiAuthenticateUrl():f.apiAuthenticateUrl;u(),f.win.location=e}function i(){var e=f.win.location,t=e.hash?e.hash.split("=")[1]:"",r=s();return t&&!r?(o(t),t):!t&&r?r:t&&r?t!==r?(o(t),t):r:""}function s(){for(var e=f.accessTokenCookieName+"=",t=f.win.document.cookie.split(";"),r=0;r<t.length;r++){for(var n=t[r];" "===n.charAt(0);)n=n.substring(1);if(-1!==n.indexOf(e))return n.substring(e.length,n.length)}return""}function o(e,t){var r=new Date;r.setTime(r.getTime()+60*(t||1)*60*1e3);var n="expires="+r.toUTCString();f.win.document.cookie=f.accessTokenCookieName+"="+e+"; "+n}function u(){o("",-1)}function a(){return f.refreshAccessTokenUrl?$.get(f.refreshAccessTokenUrl):!1}var c={win:window,authenticateOnStart:!0,apiAuthenticateUrl:"https://api.mendeley.com/oauth/authorize",accessTokenCookieName:"accessToken",scope:"all"},l={clientId:!1,redirectUrl:!1},d={apiAuthenticateUrl:"/login",refreshAccessTokenUrl:!1},f={};return{implicitGrantFlow:e,authCodeFlow:t}}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,r){var n;n=function(){"use strict";function e(e,r,n){return new t(e,$.extend({},d,r),n)}function t(e,t,r){if(!t.authFlow)throw new Error("Please provide an authentication interface");this.request=e,this.settings=t,this.retries=0,this.authRetries=0,this.notifier=r||f,this.notifier.notify("startInfo",[this.request.type,this.request.url],this.request)}function r(e,t){e=e||$.Deferred(),t=t||this.request,t.headers=t.headers||{};var r=this.settings.authFlow.getToken();if(!r)return this.notifier.notify("tokenError",null,this.request),e.reject(this.request),this.settings.authFlow.authenticate(200),e.promise();if(t.headers.Authorization="Bearer "+r,this.settings.fileUpload){var s=$.ajaxSettings.xhr();t.xhr=function(){return s},t.dataType="text",["loadstart","loadend","load","progress","abort","error","timeout"].forEach(function(r){s.upload.addEventListener(r,o.call(this,e,t,s))}.bind(this))}return $.ajax(t).fail(n.bind(this,e)).done(i.bind(this,e)),e.promise()}function n(e,t){switch(t.status){case 0:case 504:this.retries<this.settings.maxRetries?(this.retries++,this.notifier.notify("commWarning",[t.status,this.retries,this.settings.maxRetries],this.request,t),this.send(e)):(this.notifier.notify("commError",[t.status,this.settings.maxRetries],this.request,t),e.reject(this.request,t));break;case 401:this.authRetries<this.settings.maxAuthRetries?(this.authRetries++,this.notifier.notify("authWarning",[t.status,this.authRetries,this.settings.maxAuthRetries],this.request,t),s.call(this,e,t)):(this.notifier.notify("authError",[t.status,this.settings.maxAuthRetries],this.request,t),e.reject(this.request,t),this.settings.authFlow.authenticate(200));break;default:this.notifier.notify("reqError",[t.status],this.request,t),e.reject(this.request,t)}}function i(e,t,r,n){var i,s=u(n,"Location");if(s&&this.settings.followLocation&&201===n.status){var o={type:"GET",url:s,dataType:"json"};this.notifier.notify("redirectInfo",null,this.request,o),this.send(e,o)}else if(this.settings.extractHeaders&&(i=c.call(this,n)),this.settings.fileUpload){if(t)try{t=JSON.parse(t)}catch(a){return this.notifier.notify("parseError",null,this.request,n),void e.reject(a)}this.notifier.notify("uploadSuccessInfo",null,this.request,t),e.resolve(t,n)}else this.notifier.notify("successInfo",null,this.request,t),e.resolve(t,i)}function s(e,t){var r=this.settings.authFlow.refreshToken();r?$.when(r).done(function(){this.send(e)}.bind(this)).fail(function(r){this.notifier.notify("refreshError",[r.status],this.request,r),e.reject(this.request,t),this.settings.authFlow.authenticate(200)}.bind(this)):(this.notifier.notify("refreshNotConfigured",[]),e.reject(this.request,t),this.settings.authFlow.authenticate(200))}function o(e,t,r){var n,i,s;return function(o){var u=o.type;o.lengthComputable&&(s=o.loaded||o.position,i=o.total,n=Math.round(100*s/i),e.notify(o,n,s,i),"progress"===u&&this.notifier.notify("uploadProgressInfo",[n,s,i],t,r)),("abort"===u||"timeout"===u||"error"===u)&&(this.notifier.notify("uploadError",[u,n],t,r),e.reject(t,r,{event:o,percent:n}))}.bind(this)}function u(e,t){return e&&e.getResponseHeader?e.getResponseHeader(t):""}function a(e){return e&&e.getAllResponseHeaders?e.getAllResponseHeaders():""}function c(e){var t,r={};return this.settings.extractHeaders.forEach(function(n){t="Link"===n?l.call(this,e):u(e,n),t&&(r[n]=t)}),r}function l(e){var t="Link",r=a(e).split("\n").filter(function(e){return e.match(new RegExp("^"+t+":.*"))}).map(function(e){return e.trim().substr(t.length+1)}).join(",");if(!r)return!1;for(var n,i,s,o=r.split(","),u={},c=0,l=o.length;l>c;c++)n=o[c].split(";"),i=n[0].replace(/[<>]/g,"").trim(),s=n[1].trim().split("=")[1].replace(/"/g,""),u[s]=i;return u}var d={authFlow:!1,maxRetries:0,maxAuthRetries:1,followLocation:!1,fileUpload:!1,extractHeaders:["Mendeley-Count","Link"]},f={notify:function(){}};return t.prototype={send:r},{create:e}}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,r){var n;n=function(){"use strict";function e(e,t,r,i){var s=$.extend({},n[e]||{});return t&&(s.message=s.message.replace(/\$(\d+)/g,function(e,r){return""+(void 0!==t[+r]?t[+r]:"")})),r&&(s.request=r),i&&(s.response=i),s}function t(t,n){if(!t||"function"!=typeof t)return!1;var i=r[n]||0;return{notify:function(r,n,s,o){var u=e(r,n,s,o);u.code>i&&t(u)}}}var r={debug:0,info:1e3,warn:2e3,error:3e3},n={startInfo:{code:1001,level:"info",message:"Request Start : $0 $1"},redirectInfo:{code:1002,level:"info",message:"Redirection followed"},successInfo:{code:1003,level:"info",message:"Request Success"},uploadProgressInfo:{code:1004,level:"info",message:"Bytes $1 from $2 uploaded ($0%)"},uploadSuccessInfo:{code:1005,level:"info",message:"Upload Success"},commWarning:{code:2001,level:"warn",message:"Communication error (status code $0). Retrying ($1/$2)."},authWarning:{code:2002,level:"warn",message:"Authentication error (status code $0). Refreshing access token ($1/$2)."},reqError:{code:3001,level:"error",message:"Request error (status code $0)."},commError:{code:3002,level:"error",message:"Communication error (status code $0).  Maximun number of retries reached ($1)."},authError:{code:3003,level:"error",message:"Authentication error (status code $0).  Maximun number of retries reached ($1)."},refreshNotConfigured:{code:3004,level:"error",message:"Refresh token error. Refresh flow not configured."},refreshError:{code:3005,level:"error",message:"Refresh token error. Request failed (status code $0)."},tokenError:{code:3006,level:"error",message:"Missing access token."},parseError:{code:3007,level:"error",message:"JSON Parsing error."},uploadError:{code:3008,level:"error",message:"Upload $0 ($1 %)"}};return{createNotifier:t}}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,r){var n,i;n=[r(3)],i=function(e){"use strict";function t(e){v=e}function r(e){g=e}function n(e){m=e}function i(t,r,n,i){return n=n||[],function(){var s=Array.prototype.slice.call(arguments,0),o=l(r,n,s),u=s[n.length],a={type:t,dataType:"json",url:o,headers:d(i),data:u},c={authFlow:v};"GET"===t&&(c.maxRetries=1);var f=e.create(a,c,m).send();return f.done(function(e,t){p.call(this,t)}.bind(this)),f}}function s(t){return function(){if(!this.paginationLinks[t])return(new $.Deferred).reject();var r={type:"GET",dataType:"json",url:this.paginationLinks[t],headers:d({})},n={authFlow:v,maxRetries:1},i=e.create(r,n,m).send();return i.done(function(e,t){p.call(this,t)}.bind(this)),i}}function o(t,r,n,i,s){return n=n||[],function(){var o=Array.prototype.slice.call(arguments,0),u=l(r,n,o),a=o[n.length],c={type:t,url:u,headers:d(i,a),data:JSON.stringify(a),processData:!1},f={authFlow:v,followLocation:s};return e.create(c,f,m).send()}}function u(t,r,n){return function(){var i=Array.prototype.slice.call(arguments,0),s=l(r,[],i),o=i[0],u=i[1],a={type:t,url:s,headers:d(c(o,u,n),t),data:o,processData:!1},f={authFlow:v,fileUpload:!0};return e.create(a,f,m).send()}}function a(e){return encodeURIComponent(e).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function c(e,t,r){var n={"Content-Type":e.type?e.type:"application/octet-stream","Content-Disposition":"attachment; filename*=UTF-8''"+a(e.name)};if(r&&t)switch(r){case"group":n.Link="<"+g+"/groups/"+t+'>; rel="group"';break;case"document":n.Link="<"+g+"/documents/"+t+'>; rel="document"'}return n}function l(e,t,r){if(!t.length)return g+e;var n={};return t.forEach(function(e,t){n[e]=r[t]}),g+f(e,n)}function d(e,t){for(var r in e){var n=e[r];"function"==typeof n&&(e[r]=n(t))}return e}function f(e,t){var r=e.match(/\{[a-z]+\}/gi);return r.forEach(function(r){var n=r.replace(/[\{\}]/g,"");if(!t.hasOwnProperty(n))throw new Error("Endpoint requires "+n);e=e.replace(r,t[n])}),e}function p(e){if(e.hasOwnProperty("Mendeley-Count")&&(this.count=parseInt(e["Mendeley-Count"],10)),e.hasOwnProperty("Link")&&"object"==typeof e.Link)for(var t in this.paginationLinks)this.paginationLinks[t]=e.Link.hasOwnProperty(t)?e.Link[t]:!1}function h(){this.paginationLinks={last:!1,next:!1,previous:!1},this.count=0}var g="https://api.mendeley.com",v=!1,m=!1;return{setAuthFlow:t,setBaseUrl:r,setNotifier:n,requestFun:i,requestPageFun:s,requestWithDataFun:o,requestWithFileFun:u,resetPaginationLinks:h}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){return{retrieve:e.requestFun("GET","/annotations/{id}",["id"]),retrieveByDocumentId:e.requestFun("GET","/annotations?document_id={id}",["id"]),retrieveByDocIdAndType:e.requestFun("GET","/annotations?type={type}&document_id={id}",["type","id"]),list:e.requestFun("GET","/annotations/"),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){return{search:e.requestFun("GET","/catalog"),retrieve:e.requestFun("GET","/catalog/{id}",["id"])}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){var t={"Content-Type":"application/vnd.mendeley-document.1+json"},r=e.requestFun("GET","/documents/"),n=e.requestFun("GET","/folders/{id}/documents",["id"]);return{create:e.requestWithDataFun("POST","/documents",!1,t,!0),createFromFile:e.requestWithFileFun("POST","/documents"),createFromFileInGroup:e.requestWithFileFun("POST","/documents","group"),retrieve:e.requestFun("GET","/documents/{id}",["id"]),update:e.requestWithDataFun("PATCH","/documents/{id}",["id"],t,!0),list:function(e){if(e&&"undefined"!=typeof e.folderId){var t=e.folderId,i={limit:e.limit};return delete e.folderId,n.call(this,t,i)}return r.call(this,e)},search:e.requestFun("GET","/search/documents"),trash:e.requestFun("POST","/documents/{id}/trash",["id"],t),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){var t={Accept:"application/vnd.mendeley-file.1+json"};return{create:e.requestWithFileFun("POST","/files","document"),list:e.requestFun("GET","/files?document_id={id}",["id"],t),remove:e.requestFun("DELETE","/files/{id}",["id"])}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){var t={folder:{"Content-Type":"application/vnd.mendeley-folder.1+json"},document:{"Content-Type":"application/vnd.mendeley-document.1+json"}};return{create:e.requestWithDataFun("POST","/folders",[],t.folder,!0),retrieve:e.requestFun("GET","/folders/{id}",["id"]),update:e.requestWithDataFun("PATCH","/folders/{id}",["id"],t.folder,!0),"delete":e.requestFun("DELETE","/folders/{id}",["id"]),removeDocument:e.requestFun("DELETE","/folders/{id}/documents/{docId}",["id","docId"],t.folder),addDocument:e.requestWithDataFun("POST","/folders/{id}/documents",["id"],t.document,!1),list:e.requestFun("GET","/folders/"),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){var t={"Content-Type":"application/vnd.mendeley-follow-request.1+json"};return{list:e.requestFun("GET","/followers"),create:e.requestWithDataFun("POST","/followers",!1,t,!1),remove:e.requestFun("DELETE","/followers/{id}",["id"])}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){return{retrieve:e.requestFun("GET","/groups/{id}",["id"]),list:e.requestFun("GET","/groups/"),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){return{search:e.requestFun("GET","/institutions"),retrieve:e.requestFun("GET","/institutions/{id}",["id"])}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){return{search:e.requestFun("GET","/locations"),retrieve:e.requestFun("GET","/locations/{id}",["id"])}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){var t={Accept:"application/vnd.mendeley-document-lookup.1+json"};return{retrieve:e.requestFun("GET","/metadata",!1,t,!1)}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){var t={"Content-Type":"application/vnd.mendeley-profile-amendment.1+json"};return{me:e.requestFun("GET","/profiles/me"),update:e.requestWithDataFun("PATCH","/profiles/me",[],t,!0)}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r(5)],i=function(e){"use strict";return function(){return{retrieve:e.requestFun("GET","/trash/{id}",["id"]),list:e.requestFun("GET","/trash/"),restore:e.requestFun("POST","/trash/{id}/restore",["id"]),destroy:e.requestFun("DELETE","/trash/{id}",["id"]),count:0,nextPage:e.requestPageFun("next"),previousPage:e.requestPageFun("previous"),lastPage:e.requestPageFun("last"),paginationLinks:{last:!1,next:!1,previous:!1},resetPagination:e.resetPaginationLinks}}}.apply(t,n),!(void 0!==i&&(e.exports=i))}])});
//# sourceMappingURL=standalone.min.js.map